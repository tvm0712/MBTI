<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBTI 靈魂羅盤</title>
    
    <!-- 引入 React 和 ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- 引入 Babel 用於解析 JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- 引入 Tailwind CSS 用於樣式 -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 自定義樣式 -->
    <style>
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1; 
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #c7c7c7; 
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8; 
        }
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-900 font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icons Components (SVG) ---
        const IconBase = ({ children, className, ...props }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width="24" height="24" 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className} 
                {...props}
            >
                {children}
            </svg>
        );

        const Brain = (props) => <IconBase {...props}><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></IconBase>;
        const CheckCircle = (props) => <IconBase {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></IconBase>;
        const Play = (props) => <IconBase {...props}><polygon points="5 3 19 12 5 21 5 3"/></IconBase>;
        const RotateCcw = (props) => <IconBase {...props}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 12"/><path d="M3 5v7h7"/></IconBase>;
        const ArrowRight = (props) => <IconBase {...props}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></IconBase>;
        const ArrowLeft = (props) => <IconBase {...props}><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></IconBase>;
        const Heart = (props) => <IconBase {...props}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></IconBase>;
        const Zap = (props) => <IconBase {...props}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></IconBase>;
        const Eye = (props) => <IconBase {...props}><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></IconBase>;
        const BookOpen = (props) => <IconBase {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></IconBase>;
        const X = (props) => <IconBase {...props}><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></IconBase>;
        const Briefcase = (props) => <IconBase {...props}><rect width="20" height="14" x="2" y="7" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></IconBase>;
        const AlertTriangle = (props) => <IconBase {...props}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></IconBase>;
        const Lightbulb = (props) => <IconBase {...props}><line x1="9" y1="18" x2="15" y2="18"/><line x1="10" y1="22" x2="14" y2="22"/><path d="M15.09 14c.18-.9.52-1.75 1-2.52a6 6 0 1 0-8.18 0c.49.77.83 1.62 1 2.52"/><path d="M12 2v1"/><path d="m4.2 4.2.7.7"/><path d="m19.1 4.9.7-.7"/><path d="M2 12h1"/><path d="M21 12h1"/></IconBase>;
        const Users = (props) => <IconBase {...props}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></IconBase>;
        const Star = (props) => <IconBase {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></IconBase>;
        const Smile = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/></IconBase>;
        const UserCheck = (props) => <IconBase {...props}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><polyline points="16 11 18 13 22 9"/></IconBase>;
        const Coffee = (props) => <IconBase {...props}><path d="M17 8h1a4 4 0 1 1 0 8h-1"/><path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z"/><line x1="6" y1="1" x2="6" y2="4"/><line x1="10" y1="1" x2="10" y2="4"/><line x1="14" y1="1" x2="14" y2="4"/></IconBase>;
        const ShoppingBag = (props) => <IconBase {...props}><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></IconBase>;
        const GraduationCap = (props) => <IconBase {...props}><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></IconBase>;
        const Info = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></IconBase>;
        const WorkIcon = (props) => <IconBase {...props}><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/></IconBase>;

        // --- Data ---
        // Expanded Matches Object covering ALL 16 Types (Global Scope)
        const allMatches = {
            "ENFJ": {
                "lover": { best: ["INFP", "ISFP", "INTP"], worst: ["ESTJ", "ISTJ", "ENTJ"] },
                "boss": { best: ["ENTJ", "ENFJ", "INTJ"], worst: ["ISTP", "ESTP", "ISFP"] },
                "teacher": { best: ["INFJ", "ENFJ", "INTP"], worst: ["ESTJ", "ISTJ", "ENTJ"] },
                "bestie": { best: ["INFJ", "ESFJ", "ENFP"], worst: ["ISTP", "ESTP", "INTJ"] },
                "colleague": { best: ["ESFJ", "ENFP", "INFJ"], worst: ["ISTP", "ESTP", "INTP"] },
                "employee": { best: ["ISFJ", "ISTJ", "ESFJ"], worst: ["ENTP", "INTP", "ESTP"] },
                "customer": { best: ["ENFP", "ESFJ", "ISFJ"], worst: ["ISTP", "INTP", "ESTJ"] },
            },
            "ENFP": {
                "lover": { best: ["INTJ", "INFJ", "ENTJ"], worst: ["ISTJ", "ESTJ", "ISFJ"] },
                "boss": { best: ["ENFJ", "ENTJ", "INTJ"], worst: ["ISTJ", "ESTJ", "ISFJ"] },
                "teacher": { best: ["ENFJ", "ENTP", "INFP"], worst: ["ISTJ", "ESTJ", "ISFJ"] },
                "bestie": { best: ["INFP", "ENTP", "ESFP"], worst: ["ISTJ", "ESTJ", "ISTP"] },
                "colleague": { best: ["INFP", "ENTP", "ESFP"], worst: ["ISTJ", "ESTJ", "ISTP"] },
                "employee": { best: ["ISFJ", "ISTJ", "ESFJ"], worst: ["ENTP", "INTP", "ESTP"] },
                "customer": { best: ["ESFP", "ENFJ", "ENTP"], worst: ["ISTJ", "ISTP", "ESTJ"] },
            },
            "ENTJ": {
                "lover": { best: ["INTP", "INFP", "ENFP"], worst: ["ISFJ", "ESFJ", "ISTJ"] },
                "boss": { best: ["ENTJ", "ESTJ", "INTJ"], worst: ["ISFP", "INFP", "ESFP"] },
                "teacher": { best: ["INTP", "ENTP", "INTJ"], worst: ["ISFP", "ESFP", "ISFJ"] },
                "bestie": { best: ["ENTP", "ESTJ", "INTJ"], worst: ["ISFP", "INFP", "ISFJ"] },
                "colleague": { best: ["ESTJ", "ISTJ", "INTJ"], worst: ["ISFP", "INFP", "ENFP"] },
                "employee": { best: ["ISTJ", "ESTJ", "INTJ"], worst: ["ISFP", "INFP", "ESFP"] },
                "customer": { best: ["ISTJ", "ESTJ", "ENTJ"], worst: ["INFP", "ISFP", "ENFP"] },
            },
            "ENTP": {
                "lover": { best: ["INFJ", "INTJ", "ENTJ"], worst: ["ISFJ", "ESFJ", "ISTJ"] },
                "boss": { best: ["ENTJ", "INTJ", "ESTJ"], worst: ["ISFJ", "ESFJ", "ISFP"] },
                "teacher": { best: ["INTP", "INTJ", "ENTJ"], worst: ["ISFJ", "ESFJ", "ISFP"] },
                "bestie": { best: ["INTP", "ENFP", "ESTP"], worst: ["ISFJ", "ISTJ", "ESFJ"] },
                "colleague": { best: ["ENFP", "INTP", "ESTP"], worst: ["ISFJ", "ISTJ", "ESFJ"] },
                "employee": { best: ["ISTJ", "ISFJ", "ESTJ"], worst: ["INFP", "ISFP", "ENFP"] },
                "customer": { best: ["ENTJ", "ESTP", "ENFP"], worst: ["ISFJ", "ISTJ", "INFJ"] },
            },
            "ESTJ": {
                "lover": { best: ["ISFP", "ISTP", "ESFP"], worst: ["INFJ", "ENFJ", "INFP"] },
                "boss": { best: ["ESTJ", "ENTJ", "ISTJ"], worst: ["INFP", "ENFP", "ISFP"] },
                "teacher": { best: ["ISTJ", "ESTJ", "ENTJ"], worst: ["INFP", "ENFP", "ISFP"] },
                "bestie": { best: ["ISTJ", "ESFJ", "ESTP"], worst: ["INFP", "INFJ", "ENFP"] },
                "colleague": { best: ["ISTJ", "ENTJ", "ESFJ"], worst: ["INFP", "ENFP", "ISFP"] },
                "employee": { best: ["ISTJ", "ESTJ", "ISFJ"], worst: ["INFP", "ENFP", "ENTP"] },
                "customer": { best: ["ISTJ", "ESTJ", "ENTJ"], worst: ["INFP", "ISFP", "ENFP"] },
            },
            "ESFJ": {
                "lover": { best: ["ISFP", "ISTP", "INTP"], worst: ["INTJ", "ENTJ", "INFP"] },
                "boss": { best: ["ESTJ", "ESFJ", "ENFJ"], worst: ["INTP", "ENTP", "ISTP"] },
                "teacher": { best: ["ESFJ", "ISFJ", "ENFJ"], worst: ["INTP", "ENTP", "ISTP"] },
                "bestie": { best: ["ISFJ", "ESFP", "ENFJ"], worst: ["INTP", "INTJ", "ISTP"] },
                "colleague": { best: ["ISFJ", "ESFP", "ESTJ"], worst: ["INTP", "INTJ", "ENTP"] },
                "employee": { best: ["ISFJ", "ISTJ", "ESFJ"], worst: ["ENTP", "INTP", "ENFP"] },
                "customer": { best: ["ESFP", "ENFP", "ESFJ"], worst: ["INTP", "ISTP", "INTJ"] },
            },
            "ISTJ": {
                "lover": { best: ["ESFP", "ESTP", "ISFP"], worst: ["ENFJ", "INFJ", "ENFP"] },
                "boss": { best: ["ESTJ", "ISTJ", "ENTJ"], worst: ["ENFP", "INFP", "ENFJ"] },
                "teacher": { best: ["ISTJ", "ESTJ", "INTJ"], worst: ["ENFP", "ESFP", "ENFJ"] },
                "bestie": { best: ["ESTJ", "ISFJ", "ISTP"], worst: ["ENFP", "ENFJ", "INFJ"] },
                "colleague": { best: ["ESTJ", "INTJ", "ISFJ"], worst: ["ENFP", "INFP", "ESFP"] },
                "employee": { best: ["ISTJ", "ISFJ", "ESTJ"], worst: ["ENFP", "ENTP", "INFP"] },
                "customer": { best: ["ISTJ", "ESTJ", "INTJ"], worst: ["ENFP", "ESFP", "INFP"] },
            },
            "ISFJ": {
                "lover": { best: ["ESFP", "ESTP", "ENTP"], worst: ["ENTJ", "INTJ", "INFJ"] },
                "boss": { best: ["ESTJ", "ESFJ", "ISTJ"], worst: ["ENTP", "INTP", "ENFP"] },
                "teacher": { best: ["ISFJ", "ESFJ", "ISTJ"], worst: ["ENTP", "INTP", "ENFP"] },
                "bestie": { best: ["ESFJ", "ISTJ", "ISFP"], worst: ["ENTP", "ENTJ", "INTP"] },
                "colleague": { best: ["ESFJ", "ISTJ", "INFJ"], worst: ["ENTP", "INTP", "ESTP"] },
                "employee": { best: ["ISFJ", "ISTJ", "ESFJ"], worst: ["ENTP", "INTP", "ENFP"] },
                "customer": { best: ["ESFJ", "ISFJ", "ESFP"], worst: ["ENTP", "INTP", "INTJ"] },
            },
            "ESTP": {
                "lover": { best: ["ISFJ", "ISTJ", "ESFJ"], worst: ["INFJ", "INTJ", "ENFP"] },
                "boss": { best: ["ESTJ", "ENTJ", "ESTP"], worst: ["INFJ", "INFP", "ISFJ"] },
                "teacher": { best: ["ESTP", "ISTP", "ENTP"], worst: ["INFJ", "INFP", "ISFJ"] },
                "bestie": { best: ["ISTP", "ESFP", "ENTP"], worst: ["INFJ", "INTJ", "INFP"] },
                "colleague": { best: ["ISTP", "ENTP", "ESTJ"], worst: ["INFJ", "INFP", "ISFJ"] },
                "employee": { best: ["ISTJ", "ESTP", "ISTP"], worst: ["INFJ", "INFP", "ENFP"] },
                "customer": { best: ["ESFP", "ESTP", "ENTP"], worst: ["INFJ", "ISTJ", "ISFJ"] },
            },
            "ESFP": {
                "lover": { best: ["ISTJ", "ISFJ", "ESTJ"], worst: ["INTJ", "INFJ", "INTP"] },
                "boss": { best: ["ESFJ", "ENFJ", "ESTP"], worst: ["INTJ", "INTP", "ISTJ"] },
                "teacher": { best: ["ESFP", "ENFP", "ISFP"], worst: ["INTJ", "INTP", "ISTJ"] },
                "bestie": { best: ["ISFP", "ESTP", "ENFP"], worst: ["INTJ", "ISTJ", "INTP"] },
                "colleague": { best: ["ESFJ", "ENFP", "ISFP"], worst: ["INTJ", "ISTJ", "INTP"] },
                "employee": { best: ["ISFJ", "ESFJ", "ISTJ"], worst: ["INTJ", "INTP", "ENTJ"] },
                "customer": { best: ["ESFP", "ENFP", "ESFJ"], worst: ["INTJ", "ISTJ", "INTP"] },
            },
            "ISTP": {
                "lover": { best: ["ESFJ", "ESTJ", "ISFJ"], worst: ["ENFJ", "ENFP", "INFJ"] },
                "boss": { best: ["ESTJ", "ENTJ", "ISTP"], worst: ["ENFJ", "ENFP", "INFJ"] },
                "teacher": { best: ["ISTP", "INTP", "ESTP"], worst: ["ENFJ", "ENFP", "INFJ"] },
                "bestie": { best: ["ESTP", "ISFP", "INTP"], worst: ["ENFJ", "ESFJ", "INFJ"] },
                "colleague": { best: ["INTP", "ESTP", "INTJ"], worst: ["ENFJ", "ENFP", "ESFJ"] },
                "employee": { best: ["ISTP", "ISTJ", "ESTP"], worst: ["ENFJ", "INFP", "ENFP"] },
                "customer": { best: ["ESTP", "ENTP", "ISTP"], worst: ["ENFJ", "ESFJ", "INFJ"] },
            },
            "ISFP": {
                "lover": { best: ["ESTJ", "ESFJ", "ISTJ"], worst: ["ENTJ", "INTJ", "ENTP"] },
                "boss": { best: ["ENFJ", "ESFJ", "ISFP"], worst: ["ENTJ", "ESTJ", "INTJ"] },
                "teacher": { best: ["ISFP", "INFP", "ESFP"], worst: ["ENTJ", "ESTJ", "INTJ"] },
                "bestie": { best: ["ESFP", "INFP", "ISFJ"], worst: ["ENTJ", "ENTP", "ESTJ"] },
                "colleague": { best: ["ISFJ", "ESFP", "INFP"], worst: ["ENTJ", "ESTJ", "INTJ"] },
                "employee": { best: ["ISFJ", "ISFP", "ISTJ"], worst: ["ENTJ", "INTJ", "ENTP"] },
                "customer": { best: ["ESFP", "ENFP", "ISFP"], worst: ["ENTJ", "ISTJ", "ESTJ"] },
            },
            "INTP": {
                "lover": { best: ["ENTJ", "ESTJ", "ENFJ"], worst: ["ESFJ", "ISFJ", "ESFP"] },
                "boss": { best: ["ENTJ", "INTJ", "INTP"], worst: ["ESFJ", "ISFJ", "ESFP"] },
                "teacher": { best: ["INTP", "INTJ", "ENTP"], worst: ["ESFJ", "ISFJ", "ESFP"] },
                "bestie": { best: ["INTJ", "INFP", "ENTP"], worst: ["ESFJ", "ESFP", "ISFJ"] },
                "colleague": { best: ["INTJ", "ENTP", "ISTP"], worst: ["ESFJ", "ESFP", "ISFJ"] },
                "employee": { best: ["INTJ", "ISTJ", "INTP"], worst: ["ESFP", "ENFP", "ESFJ"] },
                "customer": { best: ["ENTP", "INTJ", "INTP"], worst: ["ESFJ", "ISFJ", "ISFP"] },
            },
            "INFP": {
                "lover": { best: ["ENFJ", "ENTJ", "ESFJ"], worst: ["ESTJ", "ISTJ", "ESTP"] },
                "boss": { best: ["ENFJ", "INFJ", "INFP"], worst: ["ESTJ", "ISTJ", "ESTP"] },
                "teacher": { best: ["INFP", "INFJ", "ENFP"], worst: ["ESTJ", "ISTJ", "ESTP"] },
                "bestie": { best: ["INFJ", "ENFP", "INTP"], worst: ["ESTJ", "ISTJ", "ESTP"] },
                "colleague": { best: ["ENFP", "INFJ", "ISFP"], worst: ["ESTJ", "ISTJ", "ENTJ"] },
                "employee": { best: ["ISFJ", "INFJ", "INFP"], worst: ["ESTJ", "ENTJ", "ESTP"] },
                "customer": { best: ["ENFP", "INFP", "INFJ"], worst: ["ESTJ", "ISTJ", "ISTP"] },
            },
            "INFJ": {
                "lover": { best: ["ENTP", "ENFP", "ENTJ"], worst: ["ESTP", "ISTP", "ESTJ"] },
                "boss": { best: ["ENFJ", "INFJ", "INTJ"], worst: ["ESTP", "ISTP", "ESTJ"] },
                "teacher": { best: ["INFJ", "INTJ", "ENFJ"], worst: ["ESTP", "ISTP", "ESTJ"] },
                "bestie": { best: ["INTJ", "INFP", "ENFJ"], worst: ["ESTP", "ESFP", "ISTP"] },
                "colleague": { best: ["ENFJ", "INTJ", "INFP"], worst: ["ESTP", "ISTP", "ESTJ"] },
                "employee": { best: ["ISFJ", "INFJ", "INTJ"], worst: ["ESTP", "ESFP", "ENTP"] },
                "customer": { best: ["ENFP", "INFJ", "ENFJ"], worst: ["ESTP", "ISTP", "ESTJ"] },
            },
            "INTJ": {
                "lover": { best: ["ENFP", "ENTP", "INFP"], worst: ["ESFP", "ISFP", "ESFJ"] },
                "boss": { best: ["ENTJ", "INTJ", "ESTJ"], worst: ["ESFP", "ISFP", "ESFJ"] },
                "teacher": { best: ["INTJ", "INTP", "ENTJ"], worst: ["ESFP", "ISFP", "ESFJ"] },
                "bestie": { best: ["INFJ", "INTP", "ENTJ"], worst: ["ESFP", "ESFJ", "ISFP"] },
                "colleague": { best: ["ENTJ", "ISTJ", "INTP"], worst: ["ESFP", "ENFP", "ISFP"] },
                "employee": { best: ["ISTJ", "INTJ", "ENTJ"], worst: ["ESFP", "ENFP", "ISFP"] },
                "customer": { best: ["ENTJ", "INTJ", "ISTJ"], worst: ["ESFP", "ISFP", "ENFP"] },
            },
        };

        const personalityTypes = {
          "ENFJ": { 
            title: "給予者 (The Giver)", 
            desc: "熱情、有同理心、反應敏捷且負責任。非常關注他人的情緒、需求和動機。能發現他人的潛能並希望能幫助他人實現。是團體中天生的領導者，擅長促進和諧。", 
            traits: ["熱情", "同理心", "領導力", "組織者"],
            details: {
              leadership: "富有魅力的領導者。擅長激勵他人，能建立人際連結並組織團隊達成共同願景。傾向於用讚美和鼓勵來帶領，但在需要時也能堅定地執行計畫。",
              learning: "喜歡透過與人互動和討論來學習。對於涉及人文價值、心理學或能直接幫助他人的主題特別感興趣。結構化的學習環境對他們有益。",
              problemSolving: "在解決問題時會優先考慮「人的感受」與「價值觀」。擅長在衝突中尋找共識，但可能會因為過度在乎他人看法而難以做出冷酷的客觀決定。",
              workEnv: "需要一個和諧、合作且充滿支持的環境。喜歡有組織、有明確目標且能與他人密切互動的工作。不喜歡競爭過度激烈或冷漠的氛圍。",
              weaknesses: "容易過度理想化他人，導致失望。對批評非常敏感，容易將客觀意見視為個人攻擊。常忽略自己的需求而過度犧牲。",
              suggestions: "學習接受建設性的批評，這不是對你個人的否定。練習在照顧他人之前，先照顧好自己的需求。學會面對並處理必要的衝突，而非一味逃避。",
              relationships: "在婚姻中是全心全意的伴侶，極度重視和諧與情感連結。他們會努力讓伴侶開心，並對伴侶的需求非常敏感。然而，他們需要大量的言語肯定與情感回饋。如果伴侶過於冷漠或批評，ENFJ 會感到極度受傷。他們傾向於避免衝突，有時會為了維持表面和平而壓抑自己的不滿，直到爆發。"
            }
          },
          "ENFP": { 
            title: "競選者 (The Inspirer)", 
            desc: "熱情洋溢、富有想像力。視生活為充滿可能性的冒險。能快速在事件和訊息中建立連結，並自信地依據這些模式行事。需要他人的肯定，也樂於給予讚美。", 
            traits: ["熱情", "創造力", "自發性", "靈活"],
            details: {
              leadership: "充滿活力與願景的領導者。擅長啟發他人，喜歡授權並鼓勵團隊成員發揮創意。不喜歡繁瑣的細節管理，傾向於給予大方向。",
              learning: "喜歡自由、開放且能發揮想像力的學習方式。討厭死記硬背，偏好探索新概念和未來的可能性。喜歡跳躍式思考。",
              problemSolving: "擅長腦力激盪，能從多個角度看問題並提出創新的解決方案。但在落實細節和收尾時可能缺乏耐心，需要協助才能完成最後一哩路。",
              workEnv: "色彩豐富、自由且允許創意的環境。喜歡多樣化的任務和有趣的人際互動。受不了嚴格的官僚體制或重複性的工作。",
              weaknesses: "容易分心，難以專注於單一任務直到完成。情緒起伏較大，有時會過度解讀他人的言行。容易承諾過多而無法兌現。",
              suggestions: "練習時間管理和專注力，學會將偉大的點子落實為具體步驟。在做決定時，試著多加入一點邏輯分析的平衡。學會說「不」。",
              relationships: "充滿熱情且極具啟發性的伴侶。他們視婚姻為一場共同成長的冒險，渴望深層的心靈連結而非僅僅是生活伴侶。他們需要大量的自由與空間來探索興趣。對於過多的例行公事或控制狂伴侶會感到窒息。他們是情感的支持者，但也需要伴侶能理解他們變幻莫測的情緒與創意。"
            }
          },
          "ENTJ": { 
            title: "指揮官 (The Executive)", 
            desc: "坦率、果斷，天生的領導者。能快速看見不合邏輯與低效率的程序，並發展出全面的系統來解決組織問題。喜歡長期的規劃與目標設定。", 
            traits: ["果斷", "戰略性", "效率", "領導"],
            details: {
              leadership: "強勢且目標導向。促使自己和他人完成組織目標。堅定有力地貫徹執行組織的理念。要求自己和他人具有頑強意志。必要時會重建整個系統。",
              learning: "智慧型、理論型學習方式。喜歡挑戰高難度的概念，但首先需要看到宏偉的藍圖和結構。重視知識的實用性。",
              problemSolving: "喜歡以其內在的認識制定戰略、系統和結構，然後客觀地做出決定。為獲得最佳結果，會接納他人和那些使自己的認識更加接近現實的細節資料。",
              workEnv: "喜歡工作中有果斷、理智接受挑戰、致力於完成遠期理念的人。強調效率、鼓勵自主性和競爭力的環境。",
              weaknesses: "可能顯得強硬，他人不敢接近。長時間不告訴他人自己的想法，因為認為他人也和自己一樣認同。過度關注任務而忽視他人的感受。",
              suggestions: "學習傾聽他人的情感需求，並意識到「人」也是系統運作的關鍵。練習多給予讚美，而不僅僅是批評。放慢腳步，欣賞當下。",
              relationships: "在關係中同樣展現領導力，喜歡掌控局面並為家庭設定長遠目標。他們對伴侶的忠誠度很高，但表達愛意的方式通常是「解決問題」而非「情感安撫」。ENTJ 可能會無意中用強勢的邏輯壓倒伴侶的感受。他們需要一位有自信、獨立且能與之進行智力對話的伴侶，而不是依賴性強的人。"
            }
          },
          "ENTP": { 
            title: "辯論家 (The Visionary)", 
            desc: "反應快、聰明、擅長激勵他人。善於解決新的、具挑戰性的問題。厭倦例行公事，很少用相同的方法做同一件事。擅長從概念上分析問題。", 
            traits: ["機智", "創新", "分析", "靈活"],
            details: {
              leadership: "創新且非傳統的領導者。喜歡挑戰現狀，鼓勵團隊質疑權威並尋找更好的方法。不喜歡階級制度，傾向於任人唯才。",
              learning: "透過辯論和提問來學習。喜歡概念模型和邏輯分析，對於死板的教學方式感到厭煩。需要能激發智力挑戰的環境。",
              problemSolving: "天生的問題解決者，擅長找出系統中的漏洞。喜歡發想解決方案，但不喜歡執行細節。決策基於邏輯分析。",
              workEnv: "充滿智力刺激、節奏快且靈活的環境。需要能夠自由表達異議和創新想法的空間。討厭繁文縟節。",
              weaknesses: "可能因過度爭辯而讓人感到疲憊。容易忽視細節和截止日期。有時會為了追求新奇而放棄正在進行的項目。",
              suggestions: "學習分辨何時該辯論，何時該支持。練習貫徹始終，將想法轉化為成果。多關注他人的感受，避免過於尖銳。",
              relationships: "喜歡充滿刺激與成長的關係。他們害怕無聊，希望伴侶能成為智力上的對手，一起探索新觀點。ENTP 可能會忽略家務瑣事或情感細節，導致伴侶感到被忽視。他們需要一個能包容他們發散思維、給予自由，同時能幫忙將他們拉回現實的伴侶。爭辯對他們來說是交流，而非吵架。"
            }
          },
          "ESFJ": { 
            title: "執政官 (The Caregiver)", 
            desc: "熱心、盡責、合作。希望周遭環境溫暖和諧。喜歡與他人共事並準時完成任務。關注日常生活中的細節，並真心關心他人。", 
            traits: ["友善", "可靠", "務實", "合作"],
            details: {
              leadership: "親切且以服務為導向的領導者。重視團隊和諧與傳統。會確保每個人都被照顧到，並建立明確的職責與規範。",
              learning: "喜歡結構化、有明確目標且能應用於實際生活的學習。偏好小組討論和實作，不喜歡過於抽象的理論。",
              problemSolving: "基於過去的經驗和既定的價值觀來解決問題。會優先考慮解決方案對人的影響，並尋求共識。",
              workEnv: "友善、合作、有秩序且充滿人情味的環境。喜歡清晰的規則和明確的期望。需要他人的讚賞和肯定。",
              weaknesses: "過度尋求認可，容易因批評而受傷。可能因避免衝突而妥協原則。有時會過度控制他人，認為是「為你好」。",
              suggestions: "學會區分建設性批評與人身攻擊。不要害怕必要的衝突。給予他人空間，讓他們用自己的方式成長。",
              relationships: "極度重視家庭傳統與承諾。他們是天生的照顧者，會努力營造溫馨有序的家庭環境。ESFJ 非常需要伴侶的讚賞與肯定，若付出被視為理所當然會感到沮喪。他們傾向於依賴社會規範來經營婚姻，喜歡既定的角色分工。衝突對他們來說非常痛苦，通常會選擇退讓以求和諧。"
            }
          },
          "ESFP": { 
            title: "表演者 (The Performer)", 
            desc: "外向、友善、包容。熱愛生活、人類和物質上的享受。喜歡與人共事。在工作中講求常識與實用性，並讓工作變得有趣。富有彈性。", 
            traits: ["活潑", "友善", "適應力", "具體"],
            details: {
              leadership: "輕鬆、激勵人心且以身作則的領導者。擅長在危機中保持冷靜並迅速行動。傾向於營造快樂的團隊氛圍。",
              learning: "透過親身體驗和實作來學習。喜歡互動性強、視覺化且有趣的教材。對於枯燥的理論缺乏耐心。",
              problemSolving: "務實且靈活。關注當下的現實情況，能迅速找到權宜之計。不喜歡過度分析未來可能發生的問題。",
              workEnv: "充滿活力、多樣化且允許社交的環境。喜歡美觀、舒適的工作場所。受不了孤獨或過度安靜的環境。",
              weaknesses: "難以進行長期規劃，容易衝動行事。可能會逃避嚴肅或困難的對話。過度重視享樂而忽略責任。",
              suggestions: "練習制定長遠目標並堅持執行。學會面對負面情緒和衝突。在做決定前，多花一點時間思考後果。",
              relationships: "是熱情、慷慨且充滿樂趣的伴侶。他們喜歡與愛人一起享受當下的美好，無論是旅行還是美食。ESFP 不喜歡沈重的壓力或無休止的批評，如果關係變得過於嚴肅或充滿衝突，他們可能會選擇逃避。他們需要一位能和他們一起玩樂，同時能稍微幫忙規劃未來的伴侶。"
            }
          },
          "ESTJ": { 
            title: "總經理 (The Guardian)", 
            desc: "務實、實際、注重事實。果斷，一旦做出決定便會採取行動。擅長組織專案與人力。重視傳統與紀律，對自己與他人都有高標準。", 
            traits: ["務實", "果斷", "組織", "傳統"],
            details: {
              leadership: "直接、果斷且以結果為導向。重視效率、規則和結構。期望部屬尊重權威並按時完成任務。",
              learning: "喜歡有邏輯、有結構且實用的學習內容。偏好明確的標準和範例。對於模糊不清或缺乏證據的理論持懷疑態度。",
              problemSolving: "依據事實、邏輯和過往經驗來解決問題。能迅速做出艱難的決定。傾向於採用經過驗證的方法。",
              workEnv: "高度組織化、結構清晰且講求效率的環境。喜歡明確的職責分工和績效標準。不喜歡混亂或缺乏紀律。",
              weaknesses: "可能顯得僵化、不願改變。對他人的情緒反應缺乏耐心。容易將自己的標準強加於人。",
              suggestions: "學習傾聽不同的觀點，並嘗試接受新方法。練習對他人展現更多的耐心和同理心。理解「效率」不是唯一的價值。",
              relationships: "是負責、可靠且傳統的伴侶。他們將婚姻視為一種契約與責任，會盡全力保護和供應家庭。ESTJ 喜歡家庭井然有序，可能會試圖管理伴侶或孩子。他們表達愛的方式是「行動」與「責任」而非甜言蜜語。伴侶需要理解他們的控制欲通常源於對家庭的關心與責任感。"
            }
          },
          "ESTP": { 
            title: "企業家 (The Doer)", 
            desc: "靈活、容忍度高，採取務實的方法以求立即的結果。對理論和概念解釋感到無聊，只想實際動手解決問題。活在當下，自發性強。", 
            traits: ["行動派", "務實", "適應力", "問題解決"],
            details: {
              leadership: "以行動為導向的領導者。擅長處理危機和解決突發問題。不喜歡繁瑣的會議，傾向於直接動手做。",
              learning: "在行動中學習。喜歡實驗、模擬和競爭。對於抽象理論感到無聊，除非能看到立即的應用。",
              problemSolving: "極度務實，擅長利用現有資源解決眼前問題。思維靈活，不拘泥於規則。是優秀的救火隊。",
              workEnv: "節奏快、充滿行動和挑戰的環境。需要自由度，不喜歡過多的規則和微觀管理。",
              weaknesses: "可能過於衝動，缺乏長遠規劃。容易忽視他人的感受。有時會為了走捷徑而打破規則。",
              suggestions: "練習在行動前先思考長遠後果。學習體察他人的情緒。培養耐心，並試著遵守必要的社會規範。",
              relationships: "尋求刺激與新鮮感的伴侶。他們活在當下，喜歡用行動和禮物來表達愛意。ESTP 害怕無聊和過度的束縛，承諾對他們來說可能是一種壓力。他們需要一位獨立、自信且願意一起冒險的伴侶。如果伴侶過於情緒化或試圖控制他們，關係容易破裂。"
            }
          },
          "INFJ": { 
            title: "提倡者 (The Protector)", 
            desc: "尋求思想、關係和物質財產的意義與連結。想了解是什麼驅動了人們，對他人有深刻的洞察力。盡責並堅持自己的價值觀。對於如何以此謀求共同利益有清晰的願景。", 
            traits: ["洞察力", "理想主義", "堅持", "深思"],
            details: {
              leadership: "安靜但堅定的領導者。透過願景和價值觀來引導他人。關心部屬的個人成長，傾向於以身作則而非發號施令。",
              learning: "喜歡獨立思考和閱讀。對於探索人類行為、心理學和哲學等深層主題感興趣。需要安靜的環境來整合資訊。",
              problemSolving: "運用直覺和價值觀來解決問題。能看到問題背後的深層原因。擅長尋找雙贏的解決方案。",
              workEnv: "安靜、和諧且允許專注的環境。需要工作具有深層的意義和目的。不喜歡衝突和辦公室政治。",
              weaknesses: "容易過度完美主義，導致精疲力竭。對批評非常敏感。習慣隱藏真實感受，讓人難以親近。",
              suggestions: "學會設定界線，保護自己的能量。接受「足夠好」而非完美。練習適度表達自己的負面情緒。",
              relationships: "尋求靈魂伴侶般的深度連結。他們對伴侶極度忠誠且體貼，常能直覺地感受到對方的需求。INFJ 非常需要被「理解」，但又不輕易敞開心扉。他們對衝突非常敏感，傾向於內化負面情緒。他們需要一位能尊重他們隱私、共享價值觀且能進行深層對話的伴侶。"
            }
          },
          "INFP": { 
            title: "調停者 (The Idealist)", 
            desc: "理想主義者，對自己的價值觀和對重要的人忠誠。希望外在生活與內在價值觀一致。好奇心重，能看見可能性，並希望能作為催化劑來實踐想法。", 
            traits: ["理想主義", "忠誠", "適應力", "好奇"],
            details: {
              leadership: "溫和且以價值為導向的領導者。給予團隊很大的自主空間。重視每個人的獨特性，不喜歡控制他人。",
              learning: "透過尋找個人意義來學習。喜歡彈性、自主且富創造力的學習方式。對於死板的規定感到窒息。",
              problemSolving: "依據內在價值觀來評估問題。擅長提出富有創意的解決方案，但可能忽略實際執行的細節。",
              workEnv: "和諧、靈活且符合個人價值觀的環境。需要私密空間來進行反思。不喜歡競爭激烈的環境。",
              weaknesses: "過度理想化，難以面對現實的醜陋面。容易在細節中迷失或拖延。對批評過度敏感。",
              suggestions: "練習將理想轉化為具體的行動計畫。學會客觀看待批評。培養處理行政瑣事的能力，雖然這很無聊。",
              relationships: "擁有極高的浪漫理想。他們對伴侶忠誠、深情且包容。INFP 傾向於將伴侶理想化，當現實不符預期時會感到痛苦。他們極度避免衝突，需要一個安全、溫柔的環境來表達情感。伴侶需要小心呵護他們的夢想和感受，並給予他們足夠的獨處空間。"
            }
          },
          "INTJ": { 
            title: "建築師 (The Scientist)", 
            desc: "有原創性的思想與強大的動力去實現想法與目標。能快速看到外部事件的模式，並發展長遠的解釋觀點。懷疑、批判、獨立、果決，對自己和他人有高標準。", 
            traits: ["獨立", "遠見", "邏輯", "決心"],
            details: {
              leadership: "戰略性的遠見者。以目標為導向，對能力有極高標準。不喜歡無效的會議和社交寒暄，傾向於獨立作業或領導精英小組。",
              learning: "喜歡深入鑽研複雜的理論和抽象概念。是終身學習者，對知識有極高的渴望。喜歡自學。",
              problemSolving: "擅長系統性分析，能從混亂中看出模式。用邏輯和理性來解決問題，有時會忽略人情世故。",
              workEnv: "安靜、專注、講求邏輯與效率的環境。需要高度的自主權，不喜歡被微觀管理或處理瑣碎雜務。",
              weaknesses: "可能顯得傲慢或冷漠。對那些反應較慢或不夠理性的人缺乏耐心。過度分析可能導致行動癱瘓。",
              suggestions: "學習欣賞不同類型的觀點（特別是情感型）。練習將你複雜的想法轉化為他人能理解的語言。多笑一點。",
              relationships: "尋求智力上的平等與共同成長。他們在感情中也是邏輯導向的，重視誠實與獨立性。INTJ 可能不擅長表達情感或解讀浪漫訊號，讓人覺得冷漠。但一旦承諾，他們是非常忠誠的伴侶。他們需要一位自信、理性且不需要時刻黏在一起的伴侶。"
            }
          },
          "INTP": { 
            title: "邏輯學家 (The Thinker)", 
            desc: "尋求對感興趣事物的邏輯解釋。比起社交更喜歡理論與抽象概念。安靜、內斂、靈活且適應力強。對於解決問題有極高的專注力。", 
            traits: ["邏輯", "懷疑", "抽象", "獨立"],
            details: {
              leadership: "概念性的領導者，通常較少主動尋求領導職位。傾向於透過提供智力指導而非管理人員來領導。給予團隊極大的自由。",
              learning: "喜歡分析、解構和重組概念。對知識本身感興趣，而非其應用。討厭死記硬背和重複練習。",
              problemSolving: "極度邏輯和客觀。擅長發現邏輯漏洞和提出創新理論。但可能對解決方案的實際執行缺乏興趣。",
              workEnv: "非結構化、靈活且充滿智力挑戰的環境。需要大量的獨處時間來思考。討厭例行公事和官僚主義。",
              weaknesses: "可能因過度糾結於邏輯細節而忽略截止日期。社交上可能顯得笨拙或疏離。容易陷入分析癱瘓。",
              suggestions: "練習將想法付諸實行。學習社交技巧，建立人際連結。理解並非所有事情都需要完美的邏輯解釋。",
              relationships: "在關係中簡單、真誠且低維護。他們不喜歡玩心理遊戲，重視心智上的交流與個人空間。INTP 可能常常活在自己的腦袋裡而忽略伴侶的情感需求，或忘記重要的紀念日。他們需要一位能理解他們對獨立的需求，且不會強迫他們進行過多社交活動的伴侶。"
            }
          },
          "ISFJ": { 
            title: "守衛者 (The Nurturer)", 
            desc: "安靜、友善、負責且盡職。致力於履行義務。不僅對細節與例行公事有耐心，且精確。忠誠、體貼，會記住對他人重要的小細節。", 
            traits: ["體貼", "負責", "細心", "忠誠"],
            details: {
              leadership: "以身作則、服務導向的領導者。重視傳統和程序。會盡心盡力支持團隊成員，確保任務順利完成。",
              learning: "喜歡有步驟、有範例且實用的教學。需要時間吸收資訊，並透過反覆練習來掌握。重視細節的準確性。",
              problemSolving: "依賴過去的經驗和既定的程序。關注細節和實際影響。在做決定時會考慮對他人的感受。",
              workEnv: "安靜、有秩序、穩定且充滿支持的環境。喜歡明確的任務和角色。不喜歡突然的改變或混亂。",
              weaknesses: "難以拒絕他人，容易過勞。對改變感到焦慮。容易因為將事情看得太重而累積壓力。",
              suggestions: "學習設立界線並說「不」。嘗試接受新的做事方法。多花時間照顧自己的需求，而不僅僅是他人。",
              relationships: "極度忠誠、體貼且奉獻的伴侶。他們會記得伴侶的所有喜好與細節，並透過具體的服務來表達愛意。ISFJ 傾向於承擔過多的家庭責任而不抱怨，直到精疲力竭。他們需要穩定、可預測的關係，並且非常渴望伴侶的感激與肯定。避免衝突是他們的首要任務。"
            }
          },
          "ISFP": { 
            title: "探險家 (The Artist)", 
            desc: "安靜、友善、敏感且仁慈。享受當下。喜歡擁有自己的空間與時間。對自己的價值觀和重要的人忠誠。不喜歡衝突，不會強將自己的意見加諸於人。", 
            traits: ["敏感", "友善", "忠誠", "隨和"],
            details: {
              leadership: "溫和、不干涉的領導者。透過實際行動和對他人的關懷來領導。不喜歡控制或批評他人。",
              learning: "透過感官體驗和實作來學習。喜歡藝術、工藝和能表達自我的活動。需要支持和鼓勵的學習氛圍。",
              problemSolving: "務實且富有同理心。關注當下對人的影響。傾向於尋找和諧且不傷害他人的解決方案。",
              workEnv: "和諧、美觀且允許個人空間的環境。喜歡具體、有形的工作成果。受不了充滿衝突或嚴格限制的環境。",
              weaknesses: "缺乏長期規劃，容易活在當下。極度迴避衝突，可能導致問題惡化。對批評非常敏感。",
              suggestions: "練習制定並堅持長期目標。學會建設性地表達不滿。理解衝突是解決問題的必經之路。",
              relationships: "溫柔、敏感且深情的伴侶。他們不擅長言語表達，而是透過行動和禮物來示愛。ISFP 需要大量的個人空間和自由，不喜歡被控制或批評。他們尋求與伴侶在情感上的共鳴，但往往將感受藏在心裡。他們需要一位能欣賞他們獨特審美、且不會給予過多壓力的伴侶。"
            }
          },
          "ISTJ": { 
            title: "物流師 (The Duty Fulfiller)", 
            desc: "安靜、嚴肅，透過全面與可靠獲得成功。務實、實際、由事實出發。負責任。決定要做什麼之後，會不計干擾地逐步向目標邁進。", 
            traits: ["嚴肅", "可靠", "專注", "務實"],
            details: {
              leadership: "負責、講求事實的領導者。重視等級制度和既定規則。以任務為導向，確保每一步都準確無誤。",
              learning: "喜歡邏輯清晰、結構嚴謹的課程。重視事實、數據和實際應用。透過反覆練習和記憶來掌握知識。",
              problemSolving: "極度理性且依據事實。利用過去的經驗和標準程序來解決問題。不喜歡未經檢驗的新方法。",
              workEnv: "安靜、有秩序、注重傳統和穩定的環境。喜歡明確的職責和績效標準。不喜歡干擾和混亂。",
              weaknesses: "可能過於固執，不願改變。對他人的情緒需求缺乏敏感度。傾向於批評不守規矩的人。",
              suggestions: "嘗試對新想法保持開放態度。學習讚賞他人的不同貢獻。練習表達溫暖和讚賞，而不僅僅是糾錯。",
              relationships: "是穩定、守信且盡責的伴侶。他們看待婚姻是一種神聖的承諾，絕不輕易違背。ISTJ 透過解決問題和維持生活秩序來表達愛，而非浪漫的語言。他們可能顯得不解風情或過於嚴肅，但他們是你在危機中最可靠的後盾。伴侶需要理解他們的愛是「做」出來的，不是「說」出來的。"
            }
          },
          "ISTP": { 
            title: "鑑賞家 (The Mechanic)", 
            desc: "容忍度高、靈活，是安靜的觀察者直到問題出現，然後會採取行動解決問題。對因果關係感興趣，並有效率地處理事實。重視效率。", 
            traits: ["靈活", "觀察", "分析", "效率"],
            details: {
              leadership: "以身作則、技術導向的領導者。通常在危機處理或需要技術專長時挺身而出。不喜歡管理他人，給予團隊極大自由。",
              learning: "透過觀察、拆解和動手做來學習。喜歡了解事物運作的原理。對於抽象理論感到不耐煩。",
              problemSolving: "冷靜、邏輯且高效。擅長分析問題的核心並利用現有資源解決。能迅速適應變化的情況。",
              workEnv: "靈活、允許獨立作業且重視技術能力的環境。需要自由空間，不喜歡過多的監管和繁文縟節。",
              weaknesses: "可能顯得冷漠或對他人的感受漠不關心。容易感到厭倦，尋求刺激而冒險。溝通風格可能過於直接。",
              suggestions: "學習主動溝通自己的想法和計畫。練習體察他人的情緒反應。培養堅持到底的毅力，完成長期的項目。",
              relationships: "獨立、冷靜且難以捉摸的伴侶。他們需要大量的獨處空間，不喜歡過於黏膩或情緒化的關係。ISTP 喜歡透過共同參與活動（如運動、旅行）來建立連結。他們不擅長處理複雜的情感問題，遇到衝突傾向於退縮或用邏輯解決。他們需要一位能尊重他們邊界、且獨立自信的伴侶。"
            }
          },
        };

        const questions = [
          { id: 1,  col: 1, text: "在派對上，你會：", a: "與許多人互動，包括陌生人", b: "只與少數認識的人互動" },
          { id: 2,  col: 2, text: "你比較傾向於：", a: "務實的 (Realistic)", b: "推測的 (Speculative)" },
          { id: 3,  col: 3, text: "你會覺得哪種情況比較糟糕？", a: "活在自己的幻想世界裡", b: "墨守成規，一成不變" },
          { id: 4,  col: 4, text: "你比較容易被什麼打動？", a: "原則 (Principles)", b: "情感 (Emotions)" },
          { id: 5,  col: 5, text: "你比較容易被哪種事物吸引？", a: "令人信服的 (Convincing)", b: "令人感動的 (Touching)" },
          { id: 6,  col: 6, text: "你比較喜歡的工作方式是？", a: "有截止期限 (To deadlines)", b: "隨性、看時間 (Just 'whenever')" },
          { id: 7,  col: 7, text: "你做選擇時傾向於：", a: "相當小心謹慎", b: "有點衝動" },
          { id: 8,  col: 1, text: "在派對上，你會：", a: "待得很晚，而且精力越來越充沛", b: "早早離開，且感到精力耗盡" },
          { id: 9,  col: 2, text: "你比較容易被哪種人吸引？", a: "理智的人 (Sensible)", b: "富想像力的人 (Imaginative)" },
          { id: 10, col: 3, text: "你比較感興趣的是：", a: "實際存在的事物", b: "可能發生的事物" },
          { id: 11, col: 4, text: "評論他人時，你更受什麼影響？", a: "法規與準則", b: "情境與狀況" },
          { id: 12, col: 5, text: "在接觸他人時，你傾向於：", a: "客觀的 (Objective)", b: "個人的/感性的 (Personal)" },
          { id: 13, col: 6, text: "你比較是：", a: "守時的", b: "悠閒的" },
          { id: 14, col: 7, text: "哪種情況更讓你困擾？", a: "事情未完成", b: "事情已結束(卻還有改進空間)" },
          { id: 15, col: 1, text: "在社交團體中，你會：", a: "掌握別人的最新動態", b: "對別人的消息比較後知後覺" },
          { id: 16, col: 2, text: "做日常事務時，你傾向：", a: "用一般的方法做", b: "用自己的獨特方式做" },
          { id: 17, col: 3, text: "作家應該：", a: "直言不諱，言行一致", b: "多用比喻來表達" },
          { id: 18, col: 4, text: "哪種更吸引你？", a: "思想的一致性", b: "和諧的人際關係" },
          { id: 19, col: 5, text: "你更習慣於做出：", a: "邏輯判斷", b: "價值判斷" },
          { id: 20, col: 6, text: "你希望事情是：", a: "確定並解決的", b: "暫定並保持開放的" },
          { id: 21, col: 7, text: "你會說你比較：", a: "嚴肅且堅定", b: "隨和" },
          { id: 22, col: 1, text: "打電話時，你會：", a: "很少擔心要說什麼，直接打", b: "會先預演你要說什麼" },
          { id: 23, col: 2, text: "你認為事實：", a: "不言自明 (Speak for themselves)", b: "是用來闡述原則的" },
          { id: 24, col: 3, text: "你覺得有遠見的人：", a: "有點煩人", b: "相當迷人" },
          { id: 25, col: 4, text: "你更常是：", a: "冷靜的人 (Cool-headed)", b: "熱心的人 (Warm-hearted)" },
          { id: 26, col: 5, text: "哪種情況更糟糕？", a: "不公正 (Unjust)", b: "無情 (Merciless)" },
          { id: 27, col: 6, text: "通常應該讓事情：", a: "經過精心選擇和抉擇", b: "隨機且順其自然" },
          { id: 28, col: 7, text: "你對哪種感覺更好？", a: "已經購買了", b: "保留購買的選擇權" },
          { id: 29, col: 1, text: "在有人陪伴時，你會：", a: "主動開啟話題", b: "等別人來跟你說話" },
          { id: 30, col: 2, text: "你認為常識 (Common sense)：", a: "通常是可信的", b: "經常是值得懷疑的" },
          { id: 31, col: 3, text: "孩子們通常：", a: "不夠實用/幫不上忙", b: "運用不夠多的幻想" },
          { id: 32, col: 4, text: "做決定時，你覺得更自在的是：", a: "標準 (Standards)", b: "感受 (Feelings)" },
          { id: 33, col: 5, text: "你比較是：", a: "堅定多於溫柔", b: "溫柔多於堅定" },
          { id: 34, col: 6, text: "哪種能力更令人欽佩？", a: "組織條理與方法的能力", b: "適應與隨機應變的能力" },
          { id: 35, col: 7, text: "你更看重：", a: "無限的/絕對的", b: "心胸開放的" },
          { id: 36, col: 1, text: "與他人新的互動會：", a: "刺激並賦予你能量", b: "消耗你的精力" },
          { id: 37, col: 2, text: "你更常是哪種人？", a: "務實型的人", b: "充滿想像型的人" },
          { id: 38, col: 3, text: "你更傾向於：", a: "看別人有什麼用處", b: "看別人如何看待事物" },
          { id: 39, col: 4, text: "哪種更令人滿意？", a: "徹底地討論一個議題", b: "就議題達成共識" },
          { id: 40, col: 5, text: "哪一個更能支配你？", a: "你的理智 (Head)", b: "你的內心 (Heart)" },
          { id: 41, col: 6, text: "你對哪種工作感到自在？", a: "有合約/協議的", b: "隨興基礎上的" },
          { id: 42, col: 7, text: "你傾向於尋找：", a: "有序的 (The orderly)", b: "順其自然的 (Whatever turns up)" },
          { id: 43, col: 1, text: "你偏好：", a: "很多朋友，但接觸短暫", b: "少數朋友，但接觸深入" },
          { id: 44, col: 2, text: "你更依據什麼行事？", a: "事實 (Facts)", b: "原則 (Principles)" },
          { id: 45, col: 3, text: "你對什麼更感興趣？", a: "生產與分配", b: "設計與研究" },
          { id: 46, col: 4, text: "哪句是讚美？", a: "這是一個非常有邏輯的人", b: "這是一個非常感性的人" },
          { id: 47, col: 5, text: "你更看重自己的：", a: "堅定不移", b: "全心奉獻" },
          { id: 48, col: 6, text: "你更偏好：", a: "最終且不可更改的陳述", b: "暫定且初步的陳述" },
          { id: 49, col: 7, text: "你在什麼時候更自在？", a: "做決定之後", b: "做決定之前" },
          { id: 50, col: 1, text: "你是否：", a: "能輕易與陌生人長談", b: "覺得跟陌生人沒什麼話好說" },
          { id: 51, col: 2, text: "你更傾向信任你的：", a: "經驗 (Experience)", b: "直覺 (Hunch)" },
          { id: 52, col: 3, text: "你覺得自己：", a: "務實多於靈巧", b: "靈巧多於務實" },
          { id: 53, col: 4, text: "哪種人更值得讚賞？", a: "理智清晰的人", b: "情感強烈的人" },
          { id: 54, col: 5, text: "你傾向於：", a: "公正的 (Fair-minded)", b: "有同情心的 (Sympathetic)" },
          { id: 55, col: 6, text: "哪種更好？", a: "確保事情安排妥當", b: "讓事情自然發生" },
          { id: 56, col: 7, text: "在關係中，大部分事情應該：", a: "可重新協商的", b: "隨機且視情況而定的" },
          { id: 57, col: 1, text: "電話響時，你會：", a: "趕快去接", b: "希望別人去接" },
          { id: 58, col: 2, text: "你更看重自己的：", a: "強烈的現實感", b: "生動的想像力" },
          { id: 59, col: 3, text: "你更被什麼吸引？", a: "基本原理 (Fundamentals)", b: "弦外之音/隱含意義 (Overtones)" },
          { id: 60, col: 4, text: "哪種錯誤更大？", a: "太過熱情", b: "太過客觀" },
          { id: 61, col: 5, text: "你認為自己基本上是：", a: "頭腦冷靜的 (Hard-headed)", b: "心腸軟的 (Soft-hearted)" },
          { id: 62, col: 6, text: "哪種情況更吸引你？", a: "結構化和有計劃的", b: "非結構化和無計劃的" },
          { id: 63, col: 7, text: "你是個怎樣的人？", a: "例行公事多於反覆無常", b: "反覆無常多於例行公事" },
          { id: 64, col: 1, text: "你更傾向於：", a: "容易接近", b: "有點矜持" },
          { id: 65, col: 2, text: "在寫作中，你偏好：", a: "字面意義 (Literal)", b: "比喻意義 (Figurative)" },
          { id: 66, col: 3, text: "對你來說哪樣更難？", a: "認同他人", b: "利用他人" },
          { id: 67, col: 4, text: "你更希望自己擁有：", a: "理智的清晰度", b: "同情心的強度" },
          { id: 68, col: 5, text: "哪種是更大的缺點？", a: "不加區別 (Indiscriminate)", b: "吹毛求疵 (Critical)" },
          { id: 69, col: 6, text: "你比較喜歡：", a: "事先計劃好的活動", b: "未經計劃的活動" },
          { id: 70, col: 7, text: "你傾向於：", a: "深思熟慮多於自發性", b: "自發性多於深思熟慮" },
        ];

        // --- App Components ---

        const IntroScreen = ({ onStart }) => (
          <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-indigo-100 to-purple-200 p-6 text-center">
            <div className="bg-white p-8 rounded-3xl shadow-2xl max-w-md w-full transform transition hover:scale-105 duration-300">
              <div className="flex justify-center mb-6">
                <div className="bg-indigo-600 p-4 rounded-full">
                  <Brain className="w-12 h-12 text-white" />
                </div>
              </div>
              <h1 className="text-3xl font-bold text-gray-800 mb-2">MBTI 靈魂羅盤</h1>
              <p className="text-indigo-600 font-medium mb-6 tracking-wide">SOUL COMPASS</p>
              
              <div className="text-gray-600 text-left mb-8 space-y-3 bg-gray-50 p-4 rounded-xl">
                <p className="flex items-start"><CheckCircle className="w-5 h-5 text-green-500 mr-2 flex-shrink-0" /> <span>沒有標準答案，請依直覺回答。</span></p>
                <p className="flex items-start"><CheckCircle className="w-5 h-5 text-green-500 mr-2 flex-shrink-0" /> <span>若選項都不完全符合，請選最接近的。</span></p>
                <p className="flex items-start"><CheckCircle className="w-5 h-5 text-green-500 mr-2 flex-shrink-0" /> <span>回答「真實的你」，而非「理想的你」。</span></p>
              </div>

              <button 
                onClick={onStart}
                className="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-8 rounded-xl flex items-center justify-center transition shadow-lg"
              >
                <Play className="w-5 h-5 mr-2" />
                開始 70 題完整檢測
              </button>
              <p className="mt-4 text-xs text-gray-400">Based on MBTI Personality Test (Z-Library).pdf</p>
            </div>
          </div>
        );

        const QuestionScreen = ({ question, total, current, onAnswer }) => (
          <div className="flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4">
            <div className="w-full max-w-lg">
              <div className="mb-8">
                <div className="flex justify-between text-xs font-semibold text-gray-500 mb-1">
                  <span>Question {current}</span>
                  <span>{total}</span>
                </div>
                <div className="w-full bg-gray-200 rounded-full h-2.5">
                  <div 
                    className="bg-indigo-600 h-2.5 rounded-full transition-all duration-300" 
                    style={{ width: `${(current / total) * 100}%` }}
                  ></div>
                </div>
              </div>

              <div className="bg-white rounded-3xl shadow-xl p-8 mb-6 min-h-[300px] flex flex-col justify-center">
                <h2 className="text-2xl font-bold text-gray-800 mb-8 text-center leading-relaxed">
                  {question.text}
                </h2>
                
                <div className="space-y-4">
                  <button 
                    onClick={() => onAnswer('a')}
                    className="w-full text-left p-5 border-2 border-indigo-100 rounded-xl hover:border-indigo-500 hover:bg-indigo-50 transition duration-200 group"
                  >
                    <div className="flex items-center">
                      <span className="w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold mr-4 group-hover:bg-indigo-600 group-hover:text-white transition">A</span>
                      <span className="text-lg text-gray-700 font-medium">{question.a}</span>
                    </div>
                  </button>

                  <button 
                    onClick={() => onAnswer('b')}
                    className="w-full text-left p-5 border-2 border-purple-100 rounded-xl hover:border-purple-500 hover:bg-purple-50 transition duration-200 group"
                  >
                    <div className="flex items-center">
                      <span className="w-8 h-8 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center font-bold mr-4 group-hover:bg-purple-600 group-hover:text-white transition">B</span>
                      <span className="text-lg text-gray-700 font-medium">{question.b}</span>
                    </div>
                  </button>
                </div>
              </div>
            </div>
          </div>
        );

        const DetailModal = ({ type, details, onClose }) => {
          if (!details) return null;

          return (
            <div className="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 backdrop-blur-sm overflow-y-auto">
              <div className="bg-white rounded-2xl w-full max-w-2xl shadow-2xl transform transition-all my-8 flex flex-col max-h-[90vh]">
                <div className="bg-gradient-to-r from-indigo-600 to-purple-600 p-6 flex justify-between items-center shrink-0 rounded-t-2xl">
                  <h3 className="text-2xl font-bold text-white flex items-center">
                    <BookOpen className="mr-3 w-6 h-6" /> 
                    深度分析報告：{type}
                  </h3>
                  <button onClick={onClose} className="text-white hover:bg-white/20 p-2 rounded-full transition">
                    <X className="w-6 h-6" />
                  </button>
                </div>

                <div className="p-8 overflow-y-auto custom-scrollbar space-y-8">
                  <section>
                    <h4 className="flex items-center text-lg font-bold text-pink-600 mb-3 border-b border-pink-100 pb-2">
                      <Heart className="w-5 h-5 mr-2" /> 親密關係與婚姻
                    </h4>
                    <div className="bg-pink-50 p-5 rounded-xl border border-pink-100">
                       <p className="text-gray-700 leading-relaxed text-base">{details.relationships}</p>
                    </div>
                  </section>

                  <section>
                    <h4 className="flex items-center text-lg font-bold text-indigo-800 mb-3 border-b pb-2">
                      <Briefcase className="w-5 h-5 mr-2" /> 領導與工作模式
                    </h4>
                    <div className="space-y-4">
                      <div className="bg-indigo-50 p-4 rounded-xl">
                        <span className="font-bold text-indigo-700 block mb-1">領導風格</span>
                        <p className="text-gray-700 leading-relaxed">{details.leadership}</p>
                      </div>
                      <div className="bg-purple-50 p-4 rounded-xl">
                        <span className="font-bold text-purple-700 block mb-1">工作環境傾向</span>
                        <p className="text-gray-700 leading-relaxed">{details.workEnv}</p>
                      </div>
                    </div>
                  </section>

                  <section>
                     <h4 className="flex items-center text-lg font-bold text-teal-800 mb-3 border-b pb-2">
                      <Brain className="w-5 h-5 mr-2" /> 學習與思維
                    </h4>
                    <div className="grid md:grid-cols-2 gap-4">
                       <div className="bg-teal-50 p-4 rounded-xl">
                        <span className="font-bold text-teal-700 block mb-1">學習模式</span>
                        <p className="text-gray-600 text-sm leading-relaxed">{details.learning}</p>
                      </div>
                      <div className="bg-blue-50 p-4 rounded-xl">
                        <span className="font-bold text-blue-700 block mb-1">解決問題</span>
                        <p className="text-gray-600 text-sm leading-relaxed">{details.problemSolving}</p>
                      </div>
                    </div>
                  </section>

                  <section>
                    <h4 className="flex items-center text-lg font-bold text-red-800 mb-3 border-b pb-2">
                      <Lightbulb className="w-5 h-5 mr-2" /> 成長建議
                    </h4>
                    <div className="space-y-3">
                      <div className="flex items-start bg-red-50 p-4 rounded-xl">
                        <AlertTriangle className="w-5 h-5 text-red-500 mr-3 mt-1 flex-shrink-0" />
                        <div>
                           <span className="font-bold text-red-700 block mb-1">潛在盲點</span>
                           <p className="text-gray-700">{details.weaknesses}</p>
                        </div>
                      </div>
                       <div className="flex items-start bg-green-50 p-4 rounded-xl">
                        <CheckCircle className="w-5 h-5 text-green-500 mr-3 mt-1 flex-shrink-0" />
                        <div>
                           <span className="font-bold text-green-700 block mb-1">發展建議</span>
                           <p className="text-gray-700">{details.suggestions}</p>
                        </div>
                      </div>
                    </div>
                  </section>
                </div>
                
                <div className="p-4 border-t bg-gray-50 rounded-b-2xl shrink-0 text-center text-gray-500 text-xs">
                  資料來源：《MBTI測驗結果解釋小全》&《Gifts Differing》
                </div>
              </div>
            </div>
          );
        };

        const TeammateModal = ({ type, onClose }) => {
          const [selectedRole, setSelectedRole] = useState(null);
          const [viewingType, setViewingType] = useState(null);

          const getMatches = (userType, role) => {
            return allMatches[userType]?.[role] || { best: ["N/A"], worst: ["N/A"] };
          };

          const roles = [
            { id: 'boss', label: '好老闆', icon: Briefcase, color: 'blue' },
            { id: 'teacher', label: '好老師', icon: GraduationCap, color: 'teal' },
            { id: 'bestie', label: '好麻吉', icon: Coffee, color: 'orange' },
            { id: 'colleague', label: '好同事', icon: Users, color: 'indigo' },
            { id: 'lover', label: '好情人', icon: Heart, color: 'pink' },
            { id: 'employee', label: '好員工', icon: WorkIcon, color: 'green' },
            { id: 'customer', label: '好顧客', icon: ShoppingBag, color: 'purple' },
          ];

          return (
            <div className="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 backdrop-blur-md">
              <div className="bg-white rounded-3xl w-full max-w-lg shadow-2xl overflow-hidden transform transition-all flex flex-col max-h-[90vh]">
                <div className="bg-gradient-to-r from-yellow-400 to-orange-500 p-6 flex justify-between items-center text-white shrink-0">
                  <h3 className="text-2xl font-bold flex items-center">
                    <Star className="mr-2 w-6 h-6 fill-current" /> 
                    誰是神隊友！
                  </h3>
                  <button onClick={onClose} className="bg-white/20 hover:bg-white/30 p-2 rounded-full transition">
                    <X className="w-6 h-6" />
                  </button>
                </div>

                <div className="p-6 overflow-y-auto custom-scrollbar">
                  {viewingType ? (
                     <div className="animate-fade-in">
                       <button 
                         onClick={() => setViewingType(null)}
                         className="mb-6 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-full flex items-center text-sm font-bold transition w-full justify-center"
                       >
                         <ArrowLeft className="w-4 h-4 mr-2" /> 返回配對列表
                       </button>

                       {personalityTypes[viewingType] ? (
                         <>
                           <div className="text-center mb-6">
                             <h2 className="text-4xl font-extrabold text-indigo-600 mb-2">{viewingType}</h2>
                             <p className="text-lg font-medium text-gray-600">{personalityTypes[viewingType]?.title}</p>
                           </div>
                           
                           <div className="bg-indigo-50 p-6 rounded-2xl mb-6">
                             <p className="text-gray-700 leading-relaxed text-sm">
                               {personalityTypes[viewingType]?.desc}
                             </p>
                           </div>

                           <div className="space-y-4">
                             <div className="bg-white border border-gray-100 shadow-sm p-4 rounded-xl">
                                <h5 className="font-bold text-gray-800 mb-2 flex items-center">
                                  <Zap className="w-4 h-4 mr-2 text-yellow-500" /> 特質標籤
                                </h5>
                                <div className="flex flex-wrap gap-2">
                                  {(personalityTypes[viewingType]?.traits || []).map(t => (
                                    <span key={t} className="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full font-bold">
                                      {t}
                                    </span>
                                  ))}
                                </div>
                             </div>
                           </div>
                         </>
                       ) : (
                         <div className="text-center p-8 text-gray-500">
                           <p>暫無此人格類型的詳細資料。</p>
                         </div>
                       )}
                     </div>
                  ) : !selectedRole ? (
                    <div className="grid grid-cols-2 gap-4">
                      {roles.map((role) => (
                        <button
                          key={role.id}
                          onClick={() => setSelectedRole(role.id)}
                          className={`p-4 rounded-xl border-2 hover:shadow-lg transition flex flex-col items-center justify-center gap-2
                            border-${role.color}-100 bg-${role.color}-50 hover:bg-${role.color}-100 text-${role.color}-700`}
                        >
                          <role.icon className="w-8 h-8 mb-1" />
                          <span className="font-bold text-lg">{role.label}</span>
                        </button>
                      ))}
                    </div>
                  ) : (
                    <div className="animate-fade-in">
                       <button 
                         onClick={() => setSelectedRole(null)}
                         className="mb-6 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-full flex items-center text-sm font-bold transition w-full justify-center"
                       >
                         <ArrowLeft className="w-4 h-4 mr-2" /> 返回角色選單
                       </button>
                       
                       <div className="text-center mb-8">
                         <h4 className="text-3xl font-extrabold text-gray-800 mb-1">
                           {roles.find(r => r.id === selectedRole).label}
                         </h4>
                         <p className="text-gray-500 text-sm">與 {type} 的契合度分析</p>
                         <p className="text-indigo-400 text-xs mt-1 flex items-center justify-center"><Info className="w-3 h-3 mr-1"/> 點擊圓圈查看詳細介紹</p>
                       </div>

                       {(() => {
                         const match = getMatches(type, selectedRole);
                         return (
                           <div className="space-y-6">
                             <div className="bg-green-50 rounded-2xl p-6 border border-green-100">
                                <h5 className="flex items-center text-green-700 font-bold text-lg mb-4">
                                  <Smile className="w-6 h-6 mr-2" />
                                  神隊友 Top 3
                                </h5>
                                <div className="flex justify-around">
                                  {match.best.map((m, idx) => (
                                    <button 
                                      key={idx} 
                                      onClick={() => setViewingType(m)}
                                      className="flex flex-col items-center group transition transform hover:scale-105"
                                    >
                                      <div className="w-16 h-16 bg-white rounded-full flex items-center justify-center text-xl font-black text-green-600 shadow-md border-2 border-green-200 mb-2 group-hover:bg-green-600 group-hover:text-white transition">
                                        {m}
                                      </div>
                                      <span className="text-xs font-bold text-green-800 bg-green-200 px-2 py-1 rounded-full">
                                        {idx === 0 ? "No.1" : idx === 1 ? "No.2" : "No.3"}
                                      </span>
                                    </button>
                                  ))}
                                </div>
                             </div>

                             <div className="bg-red-50 rounded-2xl p-6 border border-red-100">
                                <h5 className="flex items-center text-red-700 font-bold text-lg mb-4">
                                  <AlertTriangle className="w-6 h-6 mr-2" />
                                  磨練使者 Top 3
                                </h5>
                                <div className="flex justify-around">
                                  {match.worst.map((m, idx) => (
                                    <button 
                                      key={idx} 
                                      onClick={() => setViewingType(m)}
                                      className="flex flex-col items-center group transition transform hover:scale-105"
                                    >
                                      <div className="w-16 h-16 bg-white rounded-full flex items-center justify-center text-xl font-black text-red-500 shadow-md border-2 border-red-200 mb-2 opacity-80 group-hover:bg-red-500 group-hover:text-white transition">
                                        {m}
                                      </div>
                                      <span className="text-xs font-bold text-red-800 bg-red-200 px-2 py-1 rounded-full">
                                        注意
                                      </span>
                                    </button>
                                  ))}
                                </div>
                             </div>
                           </div>
                         );
                       })()}
                       
                        <button 
                         onClick={() => setSelectedRole(null)}
                         className="mt-8 text-gray-400 hover:text-gray-600 flex items-center justify-center text-xs font-semibold transition w-full"
                       >
                         <ArrowLeft className="w-3 h-3 mr-1" /> 選擇其他角色
                       </button>
                    </div>
                  )}
                </div>
              </div>
            </div>
          );
        };

        const ResultScreen = ({ result, scores, onRetry }) => {
          const [showDetails, setShowDetails] = useState(false);
          const [showTeammates, setShowTeammates] = useState(false);
          const typeInfo = personalityTypes[result] || {};

          const DimensionBar = ({ label1, val1, label2, val2, color }) => {
            const total = val1 + val2;
            const p1 = total === 0 ? 50 : Math.round((val1 / total) * 100);
            const p2 = 100 - p1;

            return (
              <div className="mb-6">
                <div className="flex justify-between text-sm font-bold text-gray-600 mb-1">
                  <span>{label1} ({val1})</span>
                  <span>{label2} ({val2})</span>
                </div>
                <div className="flex h-4 rounded-full overflow-hidden bg-gray-200">
                  <div style={{ width: `${p1}%` }} className={`bg-${color}-500 transition-all duration-1000`}></div>
                  <div style={{ width: `${p2}%` }} className={`bg-gray-400 transition-all duration-1000 opacity-30`}></div>
                </div>
              </div>
            );
          };

          return (
            <div className="min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8">
              <div className="max-w-3xl mx-auto">
                <div className="bg-white rounded-3xl shadow-2xl overflow-hidden">
                  <div className="bg-gradient-to-r from-indigo-600 to-purple-600 p-10 text-center text-white relative overflow-hidden">
                    <div className="absolute top-0 left-0 w-32 h-32 bg-white opacity-10 rounded-full -translate-x-10 -translate-y-10"></div>
                    <div className="absolute bottom-0 right-0 w-48 h-48 bg-white opacity-10 rounded-full translate-x-10 translate-y-10"></div>
                    
                    <h2 className="text-sm uppercase tracking-widest opacity-80 mb-2 font-semibold">您的靈魂人格是</h2>
                    <h1 className="text-7xl font-extrabold mb-4 tracking-tight drop-shadow-md">{result}</h1>
                    <p className="text-2xl font-medium bg-white/20 inline-block px-6 py-2 rounded-full backdrop-blur-sm">{typeInfo.title}</p>
                  </div>

                  <div className="p-8">
                    <div className="mb-10 text-center">
                      <p className="text-gray-600 text-lg leading-relaxed">{typeInfo.desc}</p>
                      <div className="flex flex-wrap justify-center gap-2 mt-4">
                        {typeInfo.traits && typeInfo.traits.map(trait => (
                          <span key={trait} className="px-3 py-1 bg-indigo-50 text-indigo-700 rounded-full text-sm font-semibold">
                            #{trait}
                          </span>
                        ))}
                      </div>
                    </div>

                    <div className="bg-gray-50 rounded-2xl p-6 mb-8 border border-gray-100">
                      <h3 className="text-lg font-bold text-gray-800 mb-4 border-b pb-2 flex items-center">
                        <Zap className="w-5 h-5 mr-2 text-yellow-500" />
                        能量分佈分析
                      </h3>
                      <DimensionBar label1="E (外向)" val1={scores.E} label2="I (內向)" val2={scores.I} color="red" />
                      <DimensionBar label1="S (實感)" val1={scores.S} label2="N (直覺)" val2={scores.N} color="yellow" />
                      <DimensionBar label1="T (思考)" val1={scores.T} label2="F (情感)" val2={scores.F} color="green" />
                      <DimensionBar label1="J (判斷)" val1={scores.J} label2="P (感知)" val2={scores.P} color="blue" />
                    </div>

                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                       <button 
                        onClick={() => setShowDetails(true)}
                        className="bg-indigo-600 text-white font-bold py-4 px-6 rounded-xl shadow-lg hover:shadow-xl hover:bg-indigo-700 transition flex items-center justify-center transform active:scale-95"
                      >
                        <BookOpen className="w-5 h-5 mr-2" />
                        查看完整解析
                      </button>

                      <button 
                        onClick={() => setShowTeammates(true)}
                        className="bg-yellow-400 text-yellow-900 font-bold py-4 px-6 rounded-xl shadow-lg hover:shadow-xl hover:bg-yellow-500 transition flex items-center justify-center transform active:scale-95"
                      >
                        <UserCheck className="w-5 h-5 mr-2" />
                        誰是神隊友！
                      </button>
                      
                      <button 
                        onClick={onRetry}
                        className="col-span-1 sm:col-span-2 bg-gray-100 text-gray-600 font-bold py-3 px-6 rounded-xl hover:bg-gray-200 transition flex items-center justify-center border-2 border-transparent hover:border-gray-300"
                      >
                        <RotateCcw className="w-5 h-5 mr-2" />
                        重新測試
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              {showDetails && (
                <DetailModal 
                  type={result} 
                  details={typeInfo.details} 
                  onClose={() => setShowDetails(false)} 
                />
              )}

              {showTeammates && (
                <TeammateModal 
                  type={result} 
                  onClose={() => setShowTeammates(false)} 
                />
              )}
            </div>
          );
        };

        const App = () => {
          const [gameState, setGameState] = useState('intro');
          const [currentQuestionIdx, setCurrentQuestionIdx] = useState(0);
          const [answers, setAnswers] = useState({});
          const [finalResult, setFinalResult] = useState(null);
          const [finalScores, setFinalScores] = useState(null);

          const startQuiz = () => {
            setGameState('quiz');
            setCurrentQuestionIdx(0);
            setAnswers({});
          };

          const handleAnswer = (option) => {
            const questionId = questions[currentQuestionIdx].id;
            const newAnswers = { ...answers, [questionId]: option };
            setAnswers(newAnswers);

            if (currentQuestionIdx < questions.length - 1) {
              setTimeout(() => setCurrentQuestionIdx(currentQuestionIdx + 1), 150);
            } else {
              calculateResult(newAnswers);
            }
          };

          const calculateResult = (completedAnswers) => {
            let colScores = {
              1: { a: 0, b: 0 },
              2: { a: 0, b: 0 },
              3: { a: 0, b: 0 },
              4: { a: 0, b: 0 },
              5: { a: 0, b: 0 },
              6: { a: 0, b: 0 },
              7: { a: 0, b: 0 },
            };

            questions.forEach(q => {
              const ans = completedAnswers[q.id];
              if (ans && colScores[q.col]) {
                colScores[q.col][ans]++;
              }
            });

            const scores = {
              E: colScores[1].a,
              I: colScores[1].b,
              S: colScores[2].a + colScores[3].a,
              N: colScores[2].b + colScores[3].b,
              T: colScores[4].a + colScores[5].a,
              F: colScores[4].b + colScores[5].b,
              J: colScores[6].a + colScores[7].a,
              P: colScores[6].b + colScores[7].b,
            };

            const type = [
              scores.E >= scores.I ? 'E' : 'I',
              scores.S >= scores.N ? 'S' : 'N',
              scores.T >= scores.F ? 'T' : 'F',
              scores.J >= scores.P ? 'J' : 'P'
            ].join('');

            setFinalScores(scores);
            setFinalResult(type);
            setGameState('result');
          };

          return (
            <div className="font-sans text-gray-900">
              {gameState === 'intro' && <IntroScreen onStart={startQuiz} />}
              {gameState === 'quiz' && (
                <QuestionScreen 
                  question={questions[currentQuestionIdx]} 
                  total={questions.length} 
                  current={currentQuestionIdx + 1}
                  onAnswer={handleAnswer}
                />
              )}
              {gameState === 'result' && (
                <ResultScreen 
                  result={finalResult} 
                  scores={finalScores} 
                  onRetry={startQuiz} 
                />
              )}
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>